<h1>System</h1>

<app-preloader *ngIf="isLoading"></app-preloader>

<div class="errors">{{ (errors$ | async) }}</div>

<ul>
    <ng-container *ngTemplateOutlet="recursiveListTmpl; context:{ list: (systemEntites$ | async)?.children }">
    </ng-container>
</ul>

<ng-template #recursiveListTmpl let-list="list">
    <li *ngFor="let item of list; let i = index"
        (click)="checkEntity(item.name, item.path, item);$event.stopPropagation();item.hidden = !item.hidden; ">

  



        <div *ngIf="item.type?.name === 'folder'">
            <div style="width:40px; float:left">
                <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 309.267 309.267"
                    style="enable-background:new 0 0 309.267 309.267;" xml:space="preserve">
                    <g>
                        <path style="fill:#D0994B;" d="M260.944,43.491H125.64c0,0-18.324-28.994-28.994-28.994H48.323c-10.67,0-19.329,8.65-19.329,19.329
               v222.286c0,10.67,8.659,19.329,19.329,19.329h212.621c10.67,0,19.329-8.659,19.329-19.329V62.82
               C280.273,52.15,271.614,43.491,260.944,43.491z" />
                        <path style="fill:#E4E7E7;" d="M28.994,72.484h251.279v77.317H28.994V72.484z" />
                        <path style="fill:#F4B459;" d="M19.329,91.814h270.609c10.67,0,19.329,8.65,19.329,19.329l-19.329,164.298
               c0,10.67-8.659,19.329-19.329,19.329H38.658c-10.67,0-19.329-8.659-19.329-19.329L0,111.143C0,100.463,8.659,91.814,19.329,91.814z
               " />
                    </g>
                </svg>
            </div>
        </div>

        <div *ngIf="item.type?.name === 'list'">
            <div style="width:40px; float:left">
                <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 455 455"
                    style="enable-background:new 0 0 455 455;" xml:space="preserve">
                    <g>
                        <polygon style="fill:#46F8FF;"
                            points="285.784,111.716 285.784,0 227.5,0 227.5,455 397.5,455 397.5,111.716 	" />
                        <rect x="57.5" style="fill:#9BFBFF;" width="170" height="455" />
                        <polygon style="fill:#00D7DF;" points="397.5,111.716 285.784,0 285.784,111.716 	" />
                    </g>
                </svg>
            </div>
        </div>

        <b>{{ item.name }}</b> <small> &nbsp;&nbsp;&nbsp; {{ item.type?.name }}</small>
        <hr>
        <div *ngIf="item.hidden">
            <ul *ngIf="item.children.length > 0">
                <ng-container *ngTemplateOutlet="recursiveListTmpl; context:{ list: item.children }"></ng-container>
            </ul>
        </div>
    </li>
</ng-template>